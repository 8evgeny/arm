<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.9.1" xml:lang="en-US">
  <compounddef id="hd44780_8c" kind="file" language="C++">
    <compoundname>hd44780.c</compoundname>
    <includes refid="hd44780_8h" local="yes">HD44780.h</includes>
    <incdepgraph>
      <node id="16">
        <label>stm32f1xx_hal_flash.h</label>
        <link refid="stm32f1xx__hal__flash_8h"/>
        <childnode refid="6" relation="include">
        </childnode>
        <childnode refid="17" relation="include">
        </childnode>
      </node>
      <node id="20">
        <label>stm32f1xx_hal_tim_ex.h</label>
        <link refid="stm32f1xx__hal__tim__ex_8h"/>
        <childnode refid="6" relation="include">
        </childnode>
      </node>
      <node id="21">
        <label>stm32f1xx_hal_pcd.h</label>
        <link refid="stm32f1xx__hal__pcd_8h"/>
        <childnode refid="22" relation="include">
        </childnode>
      </node>
      <node id="15">
        <label>stm32f1xx_hal_cortex.h</label>
        <link refid="stm32f1xx__hal__cortex_8h"/>
        <childnode refid="6" relation="include">
        </childnode>
      </node>
      <node id="22">
        <label>stm32f1xx_ll_usb.h</label>
        <link refid="stm32f1xx__ll__usb_8h"/>
        <childnode refid="6" relation="include">
        </childnode>
      </node>
      <node id="3">
        <label>stm32f1xx_hal.h</label>
        <link refid="stm32f1xx__hal_8h"/>
        <childnode refid="4" relation="include">
        </childnode>
      </node>
      <node id="8">
        <label>stddef.h</label>
      </node>
      <node id="1">
        <label>Src/hd44780.c</label>
        <link refid="hd44780_8c"/>
        <childnode refid="2" relation="include">
        </childnode>
      </node>
      <node id="18">
        <label>stm32f1xx_hal_pwr.h</label>
        <link refid="stm32f1xx__hal__pwr_8h"/>
        <childnode refid="6" relation="include">
        </childnode>
      </node>
      <node id="5">
        <label>stm32f1xx_hal_rcc.h</label>
        <link refid="stm32f1xx__hal__rcc_8h"/>
        <childnode refid="6" relation="include">
        </childnode>
        <childnode refid="9" relation="include">
        </childnode>
      </node>
      <node id="14">
        <label>stm32f1xx_hal_dma_ex.h</label>
        <link refid="stm32f1xx__hal__dma__ex_8h"/>
        <childnode refid="6" relation="include">
        </childnode>
      </node>
      <node id="7">
        <label>stm32f1xx.h</label>
        <link refid="stm32f1xx_8h"/>
      </node>
      <node id="17">
        <label>stm32f1xx_hal_flash_ex.h</label>
        <link refid="stm32f1xx__hal__flash__ex_8h"/>
        <childnode refid="6" relation="include">
        </childnode>
      </node>
      <node id="13">
        <label>stm32f1xx_hal_dma.h</label>
        <link refid="stm32f1xx__hal__dma_8h"/>
        <childnode refid="6" relation="include">
        </childnode>
        <childnode refid="14" relation="include">
        </childnode>
      </node>
      <node id="19">
        <label>stm32f1xx_hal_tim.h</label>
        <link refid="stm32f1xx__hal__tim_8h"/>
        <childnode refid="6" relation="include">
        </childnode>
        <childnode refid="20" relation="include">
        </childnode>
      </node>
      <node id="9">
        <label>stm32f1xx_hal_rcc_ex.h</label>
        <link refid="stm32f1xx__hal__rcc__ex_8h"/>
        <childnode refid="6" relation="include">
        </childnode>
      </node>
      <node id="2">
        <label>HD44780.h</label>
        <link refid="hd44780_8h"/>
        <childnode refid="3" relation="include">
        </childnode>
      </node>
      <node id="4">
        <label>stm32f1xx_hal_conf.h</label>
        <link refid="stm32f1xx__hal__conf_8h"/>
        <childnode refid="5" relation="include">
        </childnode>
        <childnode refid="10" relation="include">
        </childnode>
        <childnode refid="12" relation="include">
        </childnode>
        <childnode refid="13" relation="include">
        </childnode>
        <childnode refid="15" relation="include">
        </childnode>
        <childnode refid="16" relation="include">
        </childnode>
        <childnode refid="18" relation="include">
        </childnode>
        <childnode refid="19" relation="include">
        </childnode>
        <childnode refid="21" relation="include">
        </childnode>
      </node>
      <node id="10">
        <label>stm32f1xx_hal_gpio.h</label>
        <link refid="stm32f1xx__hal__gpio_8h"/>
        <childnode refid="6" relation="include">
        </childnode>
        <childnode refid="11" relation="include">
        </childnode>
      </node>
      <node id="11">
        <label>stm32f1xx_hal_gpio_ex.h</label>
        <link refid="stm32f1xx__hal__gpio__ex_8h"/>
        <childnode refid="6" relation="include">
        </childnode>
      </node>
      <node id="6">
        <label>stm32f1xx_hal_def.h</label>
        <link refid="stm32f1xx__hal__def_8h"/>
        <childnode refid="7" relation="include">
        </childnode>
        <childnode refid="8" relation="include">
        </childnode>
      </node>
      <node id="12">
        <label>stm32f1xx_hal_exti.h</label>
        <link refid="stm32f1xx__hal__exti_8h"/>
        <childnode refid="6" relation="include">
        </childnode>
      </node>
    </incdepgraph>
      <sectiondef kind="define">
      <memberdef kind="define" id="hd44780_8c_1aec6819edb45f4ea15f9c09bb20de58be" prot="public" static="no">
        <name>GET_GPIO_BIT</name>
        <param><defname>dat</defname></param>
        <param><defname>weight</defname></param>
        <initializer>(<ref refid="group___g_p_i_o___exported___types_1ga5b3ef0486b179415581eb342e0ea6b43" kindref="member">GPIO_PinState</ref>)((dat&gt;&gt;weight)&amp;1u)</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="Src/hd44780.c" line="26" column="9" bodyfile="Src/hd44780.c" bodystart="26" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="hd44780_8c_1a248ef55873be7b7ce4d7edb8137b35f1" prot="public" static="no">
        <name>HD44780_STROBE_TIME</name>
        <initializer>5</initializer>
        <briefdescription>
<para>LCD time of strobe signal. Must be &gt; 230 ns. </para>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="Src/hd44780.c" line="27" column="9" bodyfile="Src/hd44780.c" bodystart="27" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="hd44780_8c_1a20cade9b2e9fccce4b1bb1dc59a91a0b" prot="public" static="no">
        <name>HD44780_DATA_LATCH</name>
        <initializer>20</initializer>
        <briefdescription>
<para>The settling time of signals on the data bus. Must be &gt; 230 ns. </para>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="Src/hd44780.c" line="28" column="9" bodyfile="Src/hd44780.c" bodystart="28" bodyend="-1"/>
      </memberdef>
      <memberdef kind="define" id="hd44780_8c_1a1bef69139731d31a4d60c13270f2fd50" prot="public" static="no">
        <name>TCMD_EXEC</name>
        <initializer>200</initializer>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="Src/hd44780.c" line="29" column="9" bodyfile="Src/hd44780.c" bodystart="29" bodyend="-1"/>
      </memberdef>
      </sectiondef>
      <sectiondef kind="func">
      <memberdef kind="function" id="hd44780_8c_1a6eaa253877028275469e5e43602dc8f0" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void HD44780_init</definition>
        <argsstring>(void)</argsstring>
        <name>HD44780_init</name>
        <param>
          <type>void</type>
        </param>
        <briefdescription>
<para>Initial LCD initialization based on HD44780 controller. initial GPIO for control LCD. </para>
        </briefdescription>
        <detaileddescription>
<para>The controller manufacturer recommends the following initialization sequence:<orderedlist>
<listitem><para>Maintain a pause of at least 15 ms between the establishment of the operating supply voltage (&gt; 4.5 V) and the performance of any operations with the controller.</para>
</listitem><listitem><para>The first operation is to execute the command that selects the bus width (it must be the 0x30 command regardless of which interface you are going to use in the future), and do not check the value of the BF flag before performing this operation.</para>
</listitem><listitem><para>Hold a pause of at least 4.1 ms.</para>
</listitem><listitem><para>Repeat the command to select the bus width, also without checking the state of the BF flag before.</para>
</listitem><listitem><para>Hold a pause of at least 100 Âµs.</para>
</listitem><listitem><para>Repeat the command to select the bus width, also without checking the state of the BF flag before. These operations are initializing, and are designed to bring the controller to the initial operating mode (i.e. to switch to the operating mode with an 8-bit data bus) following this normal order (without pauses, but checking the BF flag), the operating modes are initialized , including the command for setting the bus width. <parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>none.</parametername>
</parameternamelist>
<parameterdescription>
<para></para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>none. </para>
</simplesect>
</para>
</listitem></orderedlist>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="Src/hd44780.c" line="32" column="6" bodyfile="Src/hd44780.c" bodystart="32" bodyend="112"/>
      </memberdef>
      <memberdef kind="function" id="hd44780_8c_1ab72b8dd729aebe077a5669a143745187" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void HD44780_writeCommand</definition>
        <argsstring>(uint8_t data)</argsstring>
        <name>HD44780_writeCommand</name>
        <param>
          <type>uint8_t</type>
          <declname>data</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="Src/hd44780.c" line="115" column="6" bodyfile="Src/hd44780.c" bodystart="115" bodyend="118"/>
      </memberdef>
      <memberdef kind="function" id="hd44780_8c_1a55dc02a073cd4c9bf392fe4801907882" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void HD44780_writeData</definition>
        <argsstring>(uint8_t data)</argsstring>
        <name>HD44780_writeData</name>
        <param>
          <type>uint8_t</type>
          <declname>data</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="Src/hd44780.c" line="121" column="6" bodyfile="Src/hd44780.c" bodystart="121" bodyend="123"/>
      </memberdef>
      <memberdef kind="function" id="hd44780_8c_1adf44985254edf6ac35b0e762c6500e6f" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void HD44780_setDataLow</definition>
        <argsstring>(uint8_t data)</argsstring>
        <name>HD44780_setDataLow</name>
        <param>
          <type>uint8_t</type>
          <declname>data</declname>
        </param>
        <briefdescription>
<para>Ð¦Ð¸ÐºÐ» ÑÑÐµÐ½Ð¸Ñ Ð¸Ð· ÐÐÐ. </para>
        </briefdescription>
        <detaileddescription>
<para>ÐÐµÑÐµÐ´ ÑÐ¸ÐºÐ»Ð¾Ð¼ Ð´Ð¾Ð»Ð¶Ð½Ñ Ð±ÑÑÑ Ð¿ÑÐ¾Ð¸Ð·Ð²ÐµÐ´ÐµÐ½Ñ ÑÑÑÐ°Ð½Ð¾Ð²ÐºÐ¸ Ð»Ð¸Ð½Ð¸Ð¹: HD44780_wire_RS(ÐºÐ¾Ð¼Ð°Ð½Ð´Ð°/Ð´Ð°Ð½Ð½ÑÐµ) HD44780_wire_RW(Ð·Ð°Ð¿Ð¸ÑÑ/ÑÐµÐ½Ð¸Ðµ) = 1 <simplesect kind="note"><para>ÐÐ ÐÐÐ£ÐÐ ÐÐÐÐÐÐÐ!!! ÐÐ¾ Ð¸Ð·Ð±ÐµÐ¶Ð°Ð½Ð¸Ðµ Ð¿Ð¾ÑÑÐ¸ Ð´Ð°Ð½Ð½ÑÑ Ð² Ð½ÐµÐ¸ÑÐ¿Ð¾Ð»ÑÐ·ÑÐµÐ¼ÑÑ Ð»Ð¸Ð½Ð¸ÑÑ Ð¿Ð¾ÑÑÐ° Ð´Ð°Ð½Ð½ÑÑ ÐÐÐ Ð² 4-Ñ Ð±Ð¸ÑÐ½Ð¾Ð¼ ÑÐµÐ¶Ð¸Ð¼Ðµ, Ð¶ÐµÐ»Ð°ÑÐµÐ»ÑÐ½Ð¾ Ð·Ð°Ð¿ÑÐµÑÐ°ÑÑ Ð¿ÑÐµÑÑÐ²Ð°Ð½Ð¸Ñ, ÐºÐ¾Ð´ ÐºÐ¾ÑÐ¾ÑÑÑ Ð²Ð·Ð°Ð¸Ð¼Ð¾Ð´ÐµÐ¹ÑÑÐ²ÑÐµÑ ÑÐ¾ ÑÐ²Ð¾Ð±Ð¾Ð´Ð½ÑÐ¼Ð¸ Ð»Ð¸Ð½Ð¸ÑÐ¼Ð¸ Ð¿Ð¾ÑÑÐ°, Ð»Ð¸Ð±Ð¾ Ð² Ð¿ÑÐµÑÑÐ²Ð°Ð½Ð¸Ð¸ Ð·Ð°Ð¿Ð¾Ð¼Ð¸Ð½Ð°ÑÑ ÑÐ¾ÑÑÐ¾ÑÐ½Ð¸Ðµ ÑÐµÐ³Ð¸ÑÑÑÐ¾Ð² Ð¿Ð¾ÑÑÐ°, Ð¿ÐµÑÐµÐ´ Ð²Ð½ÐµÑÐµÐ½Ð¸ÐµÐ¼ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½Ð¸Ð¹, Ð¸ Ð²Ð¾ÑÑÑÐ°Ð½Ð°Ð²Ð»Ð¸Ð²Ð°ÑÑ Ð´Ð°Ð½Ð½ÑÐµ Ð¿Ð¾ Ð·Ð°Ð²ÐµÑÑÐµÐ½Ð¸Ñ Ð¿ÑÐµÑÑÐ²Ð°Ð½Ð¸Ñ.</para>
</simplesect>
Waiting cycle for LCD readiness. <parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>None.</parametername>
</parameternamelist>
<parameterdescription>
<para></para>
</parameterdescription>
</parameteritem>
</parameterlist>
<simplesect kind="return"><para>Returns 1 if the LCD is ready and there is no timeout, otherwise 0. </para>
</simplesect>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="Src/hd44780.c" line="126" column="6" bodyfile="Src/hd44780.c" bodystart="126" bodyend="128"/>
      </memberdef>
      <memberdef kind="function" id="hd44780_8c_1a0a62ddf3189809a4d4c681af25033a03" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void HD44780_setDataHigh</definition>
        <argsstring>(uint8_t data)</argsstring>
        <name>HD44780_setDataHigh</name>
        <param>
          <type>uint8_t</type>
          <declname>data</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="Src/hd44780.c" line="131" column="6" bodyfile="Src/hd44780.c" bodystart="131" bodyend="133"/>
      </memberdef>
      <memberdef kind="function" id="hd44780_8c_1a10b6032f7723fc2382f5d131e3d45501" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void HD44780_setDataBus</definition>
        <argsstring>(uint8_t data)</argsstring>
        <name>HD44780_setDataBus</name>
        <param>
          <type>uint8_t</type>
          <declname>data</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="Src/hd44780.c" line="136" column="6" bodyfile="Src/hd44780.c" bodystart="136" bodyend="150"/>
      </memberdef>
      <memberdef kind="function" id="hd44780_8c_1aaa9f0cbe49cb343a54f40f98c09b0e3b" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void HD44780_setRS</definition>
        <argsstring>(uint8_t state)</argsstring>
        <name>HD44780_setRS</name>
        <param>
          <type>uint8_t</type>
          <declname>state</declname>
        </param>
        <briefdescription>
<para>The RS line of the LCD is set to LOW / HIGH. </para>
        </briefdescription>
        <detaileddescription>
<para>Function of setting the level on the RS line for LCD. <parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>state</parametername>
</parameternamelist>
<parameterdescription>
<para>(0 - requred CMD, 1 - requred DATA) </para>
</parameterdescription>
</parameteritem>
</parameterlist>
<parameterlist kind="retval"><parameteritem>
<parameternamelist>
<parametername>None.</parametername>
</parameternamelist>
<parameterdescription>
<para></para>
</parameterdescription>
</parameteritem>
</parameterlist>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="Src/hd44780.c" line="154" column="6" bodyfile="Src/hd44780.c" bodystart="154" bodyend="160"/>
      </memberdef>
      <memberdef kind="function" id="hd44780_8c_1ad9451dc8757dab4730c66a3182284e16" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void HD44780_setRW</definition>
        <argsstring>(uint8_t state)</argsstring>
        <name>HD44780_setRW</name>
        <param>
          <type>uint8_t</type>
          <declname>state</declname>
        </param>
        <briefdescription>
<para>The RW line of the LCD is set to LOW / HIGH. </para>
        </briefdescription>
        <detaileddescription>
<para>Function of setting the level on the RW line for LCD. <parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>state</parametername>
</parameternamelist>
<parameterdescription>
<para>(0 - write mode, 1 - read mode). </para>
</parameterdescription>
</parameteritem>
</parameterlist>
<parameterlist kind="retval"><parameteritem>
<parameternamelist>
<parametername>None.</parametername>
</parameternamelist>
<parameterdescription>
<para></para>
</parameterdescription>
</parameteritem>
</parameterlist>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="Src/hd44780.c" line="164" column="6" bodyfile="Src/hd44780.c" bodystart="164" bodyend="170"/>
      </memberdef>
      <memberdef kind="function" id="hd44780_8c_1af9b70fa23fe73f5b06cfe0c3b604adf6" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void HD44780_setEN</definition>
        <argsstring>(uint8_t state)</argsstring>
        <name>HD44780_setEN</name>
        <param>
          <type>uint8_t</type>
          <declname>state</declname>
        </param>
        <briefdescription>
<para>The EN line of the LCD is set to LOW / HIGH. </para>
        </briefdescription>
        <detaileddescription>
<para>Function of setting the level on the EN line for LCD. <parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>state</parametername>
</parameternamelist>
<parameterdescription>
<para>(0 - start of strobe, 1 - end of strobe). </para>
</parameterdescription>
</parameteritem>
</parameterlist>
<parameterlist kind="retval"><parameteritem>
<parameternamelist>
<parametername>None.</parametername>
</parameternamelist>
<parameterdescription>
<para></para>
</parameterdescription>
</parameteritem>
</parameterlist>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="Src/hd44780.c" line="174" column="6" bodyfile="Src/hd44780.c" bodystart="174" bodyend="183"/>
      </memberdef>
      <memberdef kind="function" id="hd44780_8c_1ac14b6c687ba506dc3c2915159f42305c" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void usDelay</definition>
        <argsstring>(uint16_t us)</argsstring>
        <name>usDelay</name>
        <param>
          <type>uint16_t</type>
          <declname>us</declname>
        </param>
        <briefdescription>
        </briefdescription>
        <detaileddescription>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="Src/hd44780.c" line="186" column="6" bodyfile="Src/hd44780.c" bodystart="186" bodyend="191"/>
      </memberdef>
      <memberdef kind="function" id="hd44780_8c_1a64ccdfe09ae2e69293cff8d88250ebc4" prot="public" static="no" const="no" explicit="no" inline="no" virt="non-virtual">
        <type>void</type>
        <definition>void HD44780_writeByte</definition>
        <argsstring>(uint8_t data, uint8_t state)</argsstring>
        <name>HD44780_writeByte</name>
        <param>
          <type>uint8_t</type>
          <declname>data</declname>
        </param>
        <param>
          <type>uint8_t</type>
          <declname>state</declname>
        </param>
        <briefdescription>
<para>Write cycle for LCD. </para>
        </briefdescription>
        <detaileddescription>
<para>Write byte to the LCD data bus (command or data). <parameterlist kind="param"><parameteritem>
<parameternamelist>
<parametername>data</parametername>
</parameternamelist>
<parameterdescription>
<para>- byte to be written. </para>
</parameterdescription>
</parameteritem>
<parameteritem>
<parameternamelist>
<parametername>state</parametername>
</parameternamelist>
<parameterdescription>
<para>- 0 if command byte, 1 - if data. </para>
</parameterdescription>
</parameteritem>
</parameterlist>
<parameterlist kind="retval"><parameteritem>
<parameternamelist>
<parametername>None.</parametername>
</parameternamelist>
<parameterdescription>
<para></para>
</parameterdescription>
</parameteritem>
</parameterlist>
</para>
        </detaileddescription>
        <inbodydescription>
        </inbodydescription>
        <location file="Src/hd44780.c" line="194" column="6" bodyfile="Src/hd44780.c" bodystart="194" bodyend="223"/>
      </memberdef>
      </sectiondef>
    <briefdescription>
<para>C library app for 4-, 8-bit parallel LCD interface. </para>
    </briefdescription>
    <detaileddescription>
<para>Driver of HD44780 display. <simplesect kind="author"><para>Donskih Dmitry, Arthur Markaryan </para>
</simplesect>
<simplesect kind="date"><para>02.03.2019, 25.03.2021 </para>
</simplesect>
<simplesect kind="copyright"><para></para>
</simplesect>
<simplesect kind="attention"><para></para>
</simplesect>
<heading level="2"><center><copy/> Copyright (c) 2018 - 2021 Donskih Dmitry. All rights reserved.</center></heading>
</para>
<para>This software component is licensed by Donskih Dmitry under BSD 3-Clause license, the &quot;License&quot;; You may not use this file except in compliance with the License. You may obtain a copy of the License at: opensource.org/licenses/BSD-3-Clause </para>
    </detaileddescription>
    <programlisting>
<codeline lineno="1"><highlight class="normal"></highlight></codeline>
<codeline lineno="23"><highlight class="normal"></highlight><highlight class="preprocessor">#include<sp/>&quot;<ref refid="hd44780_8h" kindref="compound">HD44780.h</ref>&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="24"><highlight class="normal"></highlight></codeline>
<codeline lineno="25"><highlight class="normal"></highlight><highlight class="comment">//#define<sp/>GDMXPROJ</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="26"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>GET_GPIO_BIT(dat,<sp/>weight)<sp/>(GPIO_PinState)((dat&gt;&gt;weight)&amp;1u)<sp/></highlight><highlight class="comment">//<sp/>why?</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="27"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>HD44780_STROBE_TIME<sp/><sp/><sp/><sp/><sp/>5<sp/><sp/><sp/></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="28"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>HD44780_DATA_LATCH<sp/><sp/><sp/><sp/><sp/><sp/>20<sp/><sp/></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="29"><highlight class="normal"></highlight><highlight class="preprocessor">#define<sp/>TCMD_EXEC<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>200<sp/></highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="30"><highlight class="normal"></highlight></codeline>
<codeline lineno="31"><highlight class="normal"></highlight><highlight class="comment">//</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="32"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="hd44780_8c_1a6eaa253877028275469e5e43602dc8f0" kindref="member">HD44780_init</ref>(</highlight><highlight class="keywordtype">void</highlight><highlight class="normal">){</highlight></codeline>
<codeline lineno="33"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="struct_g_p_i_o___init_type_def" kindref="compound">GPIO_InitTypeDef</ref><sp/>GPIO_InitStruct<sp/>=<sp/>{0,<sp/><ref refid="group___g_p_i_o__mode__define_1ga1013838a64cec2f8c88f079c449d1982" kindref="member">GPIO_MODE_OUTPUT_PP</ref>,<sp/><ref refid="group___g_p_i_o__pull__define_1ga5c2862579882c1cc64e36d38fbd07a4c" kindref="member">GPIO_NOPULL</ref>,<sp/><ref refid="group___g_p_i_o__speed__define_1gab7916c4265bfa1b26a5205ea9c1caa4e" kindref="member">GPIO_SPEED_FREQ_LOW</ref>};</highlight></codeline>
<codeline lineno="34"><highlight class="normal"></highlight></codeline>
<codeline lineno="35"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>Configure<sp/>GPIO<sp/>pins<sp/>for<sp/>LCD<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="36"><highlight class="normal"></highlight></codeline>
<codeline lineno="37"><highlight class="normal"><sp/><sp/><sp/><sp/>HAL_GPIO_WritePin(HD44780_RS_GPIO_Port,<sp/>HD44780_RS_Pin,<sp/>GPIO_PIN_RESET);</highlight></codeline>
<codeline lineno="38"><highlight class="normal"><sp/><sp/><sp/><sp/>GPIO_InitStruct.<ref refid="struct_g_p_i_o___init_type_def_1a871d0ab74071724e96b7cc9ae2a7532b" kindref="member">Pin</ref><sp/>=<sp/>HD44780_RS_Pin;</highlight></codeline>
<codeline lineno="39"><highlight class="normal"><sp/><sp/><sp/><sp/>HAL_GPIO_Init(HD44780_RS_GPIO_Port,<sp/>&amp;GPIO_InitStruct);</highlight></codeline>
<codeline lineno="40"><highlight class="normal"></highlight></codeline>
<codeline lineno="41"><highlight class="normal"><sp/><sp/><sp/><sp/>HAL_GPIO_WritePin(HD44780_RW_GPIO_Port,<sp/>HD44780_RW_Pin,<sp/>GPIO_PIN_RESET);</highlight></codeline>
<codeline lineno="42"><highlight class="normal"><sp/><sp/><sp/><sp/>GPIO_InitStruct.<ref refid="struct_g_p_i_o___init_type_def_1a871d0ab74071724e96b7cc9ae2a7532b" kindref="member">Pin</ref><sp/>=<sp/>HD44780_RW_Pin;</highlight></codeline>
<codeline lineno="43"><highlight class="normal"><sp/><sp/><sp/><sp/>HAL_GPIO_Init(HD44780_RW_GPIO_Port,<sp/>&amp;GPIO_InitStruct);</highlight></codeline>
<codeline lineno="44"><highlight class="normal"></highlight></codeline>
<codeline lineno="45"><highlight class="normal"><sp/><sp/><sp/><sp/>HAL_GPIO_WritePin(HD44780_EN_GPIO_Port,<sp/>HD44780_EN_Pin,<sp/>GPIO_PIN_RESET);</highlight></codeline>
<codeline lineno="46"><highlight class="normal"><sp/><sp/><sp/><sp/>GPIO_InitStruct.<ref refid="struct_g_p_i_o___init_type_def_1a871d0ab74071724e96b7cc9ae2a7532b" kindref="member">Pin</ref><sp/>=<sp/>HD44780_EN_Pin;</highlight></codeline>
<codeline lineno="47"><highlight class="normal"><sp/><sp/><sp/><sp/>HAL_GPIO_Init(HD44780_EN_GPIO_Port,<sp/>&amp;GPIO_InitStruct);</highlight></codeline>
<codeline lineno="48"><highlight class="normal"></highlight></codeline>
<codeline lineno="49"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>HD44780_8BIT_BUS_REQURED</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="50"><highlight class="normal"><sp/><sp/><sp/><sp/>HAL_GPIO_WritePin(HD44780_D0_GPIO_Port,<sp/>HD44780_D0_Pin,<sp/>GPIO_PIN_RESET);</highlight></codeline>
<codeline lineno="51"><highlight class="normal"><sp/><sp/><sp/><sp/>GPIO_InitStruct.<ref refid="struct_g_p_i_o___init_type_def_1a871d0ab74071724e96b7cc9ae2a7532b" kindref="member">Pin</ref><sp/>=<sp/>HD44780_D0_Pin;</highlight></codeline>
<codeline lineno="52"><highlight class="normal"><sp/><sp/><sp/><sp/>HAL_GPIO_Init(HD44780_D0_GPIO_Port,<sp/>&amp;GPIO_InitStruct);</highlight></codeline>
<codeline lineno="53"><highlight class="normal"></highlight></codeline>
<codeline lineno="54"><highlight class="normal"><sp/><sp/><sp/><sp/>HAL_GPIO_WritePin(HD44780_D1_GPIO_Port,<sp/>HD44780_D1_Pin,<sp/>GPIO_PIN_RESET);</highlight></codeline>
<codeline lineno="55"><highlight class="normal"><sp/><sp/><sp/><sp/>GPIO_InitStruct.<ref refid="struct_g_p_i_o___init_type_def_1a871d0ab74071724e96b7cc9ae2a7532b" kindref="member">Pin</ref><sp/>=<sp/>HD44780_D1_Pin;</highlight></codeline>
<codeline lineno="56"><highlight class="normal"><sp/><sp/><sp/><sp/>HAL_GPIO_Init(HD44780_D1_GPIO_Port,<sp/>&amp;GPIO_InitStruct);</highlight></codeline>
<codeline lineno="57"><highlight class="normal"></highlight></codeline>
<codeline lineno="58"><highlight class="normal"><sp/><sp/><sp/><sp/>HAL_GPIO_WritePin(HD44780_D2_GPIO_Port,<sp/>HD44780_D2_Pin,<sp/>GPIO_PIN_RESET);</highlight></codeline>
<codeline lineno="59"><highlight class="normal"><sp/><sp/><sp/><sp/>GPIO_InitStruct.<ref refid="struct_g_p_i_o___init_type_def_1a871d0ab74071724e96b7cc9ae2a7532b" kindref="member">Pin</ref><sp/>=<sp/>HD44780_D2_Pin;</highlight></codeline>
<codeline lineno="60"><highlight class="normal"><sp/><sp/><sp/><sp/>HAL_GPIO_Init(HD44780_D2_GPIO_Port,<sp/>&amp;GPIO_InitStruct);</highlight></codeline>
<codeline lineno="61"><highlight class="normal"></highlight></codeline>
<codeline lineno="62"><highlight class="normal"><sp/><sp/><sp/><sp/>HAL_GPIO_WritePin(HD44780_D3_GPIO_Port,<sp/>HD44780_D3_Pin,<sp/>GPIO_PIN_RESET);</highlight></codeline>
<codeline lineno="63"><highlight class="normal"><sp/><sp/><sp/><sp/>GPIO_InitStruct.<ref refid="struct_g_p_i_o___init_type_def_1a871d0ab74071724e96b7cc9ae2a7532b" kindref="member">Pin</ref><sp/>=<sp/>HD44780_D3_Pin;</highlight></codeline>
<codeline lineno="64"><highlight class="normal"><sp/><sp/><sp/><sp/>HAL_GPIO_Init(HD44780_D3_GPIO_Port,<sp/>&amp;GPIO_InitStruct);</highlight></codeline>
<codeline lineno="65"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">//<sp/>HD44780_8BIT_BUS_REQURED</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="66"><highlight class="normal"></highlight></codeline>
<codeline lineno="67"><highlight class="normal"><sp/><sp/><sp/><sp/>HAL_GPIO_WritePin(HD44780_D4_GPIO_Port,<sp/>HD44780_D4_Pin,<sp/>GPIO_PIN_RESET);</highlight></codeline>
<codeline lineno="68"><highlight class="normal"><sp/><sp/><sp/><sp/>GPIO_InitStruct.<ref refid="struct_g_p_i_o___init_type_def_1a871d0ab74071724e96b7cc9ae2a7532b" kindref="member">Pin</ref><sp/>=<sp/>HD44780_D4_Pin;</highlight></codeline>
<codeline lineno="69"><highlight class="normal"><sp/><sp/><sp/><sp/>HAL_GPIO_Init(HD44780_D4_GPIO_Port,<sp/>&amp;GPIO_InitStruct);</highlight></codeline>
<codeline lineno="70"><highlight class="normal"></highlight></codeline>
<codeline lineno="71"><highlight class="normal"><sp/><sp/><sp/><sp/>HAL_GPIO_WritePin(HD44780_D5_GPIO_Port,<sp/>HD44780_D5_Pin,<sp/>GPIO_PIN_RESET);</highlight></codeline>
<codeline lineno="72"><highlight class="normal"><sp/><sp/><sp/><sp/>GPIO_InitStruct.<ref refid="struct_g_p_i_o___init_type_def_1a871d0ab74071724e96b7cc9ae2a7532b" kindref="member">Pin</ref><sp/>=<sp/>HD44780_D5_Pin;</highlight></codeline>
<codeline lineno="73"><highlight class="normal"><sp/><sp/><sp/><sp/>HAL_GPIO_Init(HD44780_D5_GPIO_Port,<sp/>&amp;GPIO_InitStruct);</highlight></codeline>
<codeline lineno="74"><highlight class="normal"></highlight></codeline>
<codeline lineno="75"><highlight class="normal"><sp/><sp/><sp/><sp/>HAL_GPIO_WritePin(HD44780_D6_GPIO_Port,<sp/>HD44780_D6_Pin,<sp/>GPIO_PIN_RESET);</highlight></codeline>
<codeline lineno="76"><highlight class="normal"><sp/><sp/><sp/><sp/>GPIO_InitStruct.<ref refid="struct_g_p_i_o___init_type_def_1a871d0ab74071724e96b7cc9ae2a7532b" kindref="member">Pin</ref><sp/>=<sp/>HD44780_D6_Pin;</highlight></codeline>
<codeline lineno="77"><highlight class="normal"><sp/><sp/><sp/><sp/>HAL_GPIO_Init(HD44780_D6_GPIO_Port,<sp/>&amp;GPIO_InitStruct);</highlight></codeline>
<codeline lineno="78"><highlight class="normal"></highlight></codeline>
<codeline lineno="79"><highlight class="normal"><sp/><sp/><sp/><sp/>HAL_GPIO_WritePin(HD44780_D7_GPIO_Port,<sp/>HD44780_D7_Pin,<sp/>GPIO_PIN_RESET);</highlight></codeline>
<codeline lineno="80"><highlight class="normal"><sp/><sp/><sp/><sp/>GPIO_InitStruct.<ref refid="struct_g_p_i_o___init_type_def_1a871d0ab74071724e96b7cc9ae2a7532b" kindref="member">Pin</ref><sp/>=<sp/>HD44780_D7_Pin;</highlight></codeline>
<codeline lineno="81"><highlight class="normal"><sp/><sp/><sp/><sp/>HAL_GPIO_Init(HD44780_D7_GPIO_Port,<sp/>&amp;GPIO_InitStruct);</highlight></codeline>
<codeline lineno="82"><highlight class="normal"></highlight></codeline>
<codeline lineno="83"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>HD44780_8BIT_BUS_REQURED</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="84"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//TO<sp/>DO...</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="85"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">//<sp/>HD44780_8BIT_BUS_REQURED</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="86"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>HD44780_4BIT_BUS_REQURED</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="87"><highlight class="normal"></highlight></codeline>
<codeline lineno="88"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hd44780_8c_1af9b70fa23fe73f5b06cfe0c3b604adf6" kindref="member">HD44780_setEN</ref>(0);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Set<sp/>EN<sp/>to<sp/>&quot;0&quot;</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="89"><highlight class="normal"><sp/><sp/><sp/><sp/>usDelay(30000);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Delay<sp/>&gt;<sp/>20<sp/>ms<sp/>after<sp/>power<sp/>on.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="90"><highlight class="normal"></highlight></codeline>
<codeline lineno="91"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Set<sp/>on<sp/>all<sp/>pins<sp/>of<sp/>the<sp/>control<sp/>lines<sp/>to<sp/>the<sp/>&quot;0&quot;<sp/>(command<sp/>write)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="92"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hd44780_8c_1aaa9f0cbe49cb343a54f40f98c09b0e3b" kindref="member">HD44780_setRS</ref>(0);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Set<sp/>CMD<sp/>mode</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="93"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hd44780_8c_1ad9451dc8757dab4730c66a3182284e16" kindref="member">HD44780_setRW</ref>(0);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Write</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="94"><highlight class="normal"><sp/><sp/><sp/><sp/>HD44780_setDataHigh(0x30);<sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Setting<sp/>the<sp/>interface<sp/>type<sp/>(8<sp/>bits)<sp/>(0x03<sp/>-<sp/>high<sp/>nibble<sp/>of<sp/>the<sp/>command<sp/>0x30)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="95"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>at<sp/>the<sp/>beginning<sp/>ALWAYS<sp/>switch<sp/>the<sp/>indicator<sp/>to<sp/>the<sp/>8-bit<sp/>mode<sp/>of<sp/>operation.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="96"><highlight class="normal"><sp/><sp/><sp/><sp/>usDelay(1);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Delay<sp/>&gt;<sp/>40<sp/>ns.<sp/>This<sp/>is<sp/>the<sp/>address<sp/>preset<sp/>time<sp/>(tAS).</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="97"><highlight class="normal"></highlight></codeline>
<codeline lineno="98"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hd44780_8c_1af9b70fa23fe73f5b06cfe0c3b604adf6" kindref="member">HD44780_setEN</ref>(1);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Start<sp/>of<sp/>strobe.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="99"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hd44780_8c_1af9b70fa23fe73f5b06cfe0c3b604adf6" kindref="member">HD44780_setEN</ref>(0);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>End<sp/>of<sp/>strobe.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="100"><highlight class="normal"></highlight></codeline>
<codeline lineno="101"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hd44780_8c_1af9b70fa23fe73f5b06cfe0c3b604adf6" kindref="member">HD44780_setEN</ref>(1);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Start<sp/>of<sp/>strobe.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="102"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hd44780_8c_1af9b70fa23fe73f5b06cfe0c3b604adf6" kindref="member">HD44780_setEN</ref>(0);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>End<sp/>of<sp/>strobe.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="103"><highlight class="normal"></highlight></codeline>
<codeline lineno="104"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hd44780_8c_1af9b70fa23fe73f5b06cfe0c3b604adf6" kindref="member">HD44780_setEN</ref>(1);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Start<sp/>of<sp/>strobe.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="105"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hd44780_8c_1af9b70fa23fe73f5b06cfe0c3b604adf6" kindref="member">HD44780_setEN</ref>(0);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>End<sp/>of<sp/>strobe.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="106"><highlight class="normal"></highlight></codeline>
<codeline lineno="107"><highlight class="normal"><sp/><sp/><sp/><sp/>HD44780_setDataHigh(0x20);<sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Setting<sp/>the<sp/>interface<sp/>type<sp/>(4<sp/>bits)<sp/>(0x02<sp/>-<sp/>high<sp/>nibble<sp/>of<sp/>the<sp/>command<sp/>0x20).</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="108"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>In<sp/>this<sp/>case,<sp/>the<sp/>RW<sp/>and<sp/>RS<sp/>bits<sp/>should<sp/>not<sp/>change!</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="109"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hd44780_8c_1af9b70fa23fe73f5b06cfe0c3b604adf6" kindref="member">HD44780_setEN</ref>(1);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Start<sp/>of<sp/>strobe.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="110"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hd44780_8c_1af9b70fa23fe73f5b06cfe0c3b604adf6" kindref="member">HD44780_setEN</ref>(0);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>End<sp/>of<sp/>strobe.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="111"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">//<sp/>HD44780_4BIT_BUS_REQURED*/</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="112"><highlight class="normal">}</highlight></codeline>
<codeline lineno="113"><highlight class="normal"></highlight></codeline>
<codeline lineno="114"><highlight class="normal"></highlight><highlight class="comment">//</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="115"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>HD44780_writeCommand(uint8_t<sp/>data){</highlight></codeline>
<codeline lineno="116"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hd44780_8c_1a64ccdfe09ae2e69293cff8d88250ebc4" kindref="member">HD44780_writeByte</ref>(data,<sp/>0);</highlight></codeline>
<codeline lineno="117"><highlight class="normal"><sp/><sp/><sp/><sp/>usDelay(TCMD_EXEC);</highlight></codeline>
<codeline lineno="118"><highlight class="normal">}</highlight></codeline>
<codeline lineno="119"><highlight class="normal"></highlight></codeline>
<codeline lineno="120"><highlight class="normal"></highlight><highlight class="comment">//</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="121"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>HD44780_writeData(uint8_t<sp/>data){</highlight></codeline>
<codeline lineno="122"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hd44780_8c_1a64ccdfe09ae2e69293cff8d88250ebc4" kindref="member">HD44780_writeByte</ref>(data,<sp/>1);</highlight></codeline>
<codeline lineno="123"><highlight class="normal">}</highlight></codeline>
<codeline lineno="124"><highlight class="normal"></highlight></codeline>
<codeline lineno="125"><highlight class="normal"></highlight><highlight class="comment">//</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="126"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="hd44780_8c_1adf44985254edf6ac35b0e762c6500e6f" kindref="member">HD44780_setDataLow</ref>(uint8_t<sp/>data){</highlight></codeline>
<codeline lineno="127"><highlight class="normal"><sp/><sp/><sp/><sp/>HD44780_setDataBus((data<sp/>&lt;&lt;<sp/>4));</highlight></codeline>
<codeline lineno="128"><highlight class="normal">}</highlight></codeline>
<codeline lineno="129"><highlight class="normal"></highlight></codeline>
<codeline lineno="130"><highlight class="normal"></highlight><highlight class="comment">//</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="131"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>HD44780_setDataHigh(uint8_t<sp/>data){</highlight></codeline>
<codeline lineno="132"><highlight class="normal"><sp/><sp/><sp/><sp/>HD44780_setDataBus(data);</highlight></codeline>
<codeline lineno="133"><highlight class="normal">}</highlight></codeline>
<codeline lineno="134"><highlight class="normal"></highlight></codeline>
<codeline lineno="135"><highlight class="normal"></highlight><highlight class="comment">//</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="136"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>HD44780_setDataBus(uint8_t<sp/>data){</highlight></codeline>
<codeline lineno="137"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>HD44780_8BIT_BUS_REQURED</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="138"><highlight class="normal"><sp/><sp/><sp/><sp/>HAL_GPIO_WritePin(HD44780_D0_GPIO_Port,<sp/>HD44780_D0_Pin,<sp/>GET_GPIO_BIT(data,<sp/>0));</highlight></codeline>
<codeline lineno="139"><highlight class="normal"><sp/><sp/><sp/><sp/>HAL_GPIO_WritePin(HD44780_D1_GPIO_Port,<sp/>HD44780_D1_Pin,<sp/>GET_GPIO_BIT(data,<sp/>1));</highlight></codeline>
<codeline lineno="140"><highlight class="normal"><sp/><sp/><sp/><sp/>HAL_GPIO_WritePin(HD44780_D2_GPIO_Port,<sp/>HD44780_D2_Pin,<sp/>GET_GPIO_BIT(data,<sp/>2));</highlight></codeline>
<codeline lineno="141"><highlight class="normal"><sp/><sp/><sp/><sp/>HAL_GPIO_WritePin(HD44780_D3_GPIO_Port,<sp/>HD44780_D3_Pin,<sp/>GET_GPIO_BIT(data,<sp/>3));</highlight></codeline>
<codeline lineno="142"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">//<sp/>HD44780_8BIT_BUS_REQURED</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="143"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>HD44780_4BIT_BUS_REQURED</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="144"><highlight class="normal"><sp/><sp/><sp/><sp/>HAL_GPIO_WritePin(HD44780_D4_GPIO_Port,<sp/>HD44780_D4_Pin,<sp/>GET_GPIO_BIT(data,<sp/>4));</highlight></codeline>
<codeline lineno="145"><highlight class="normal"><sp/><sp/><sp/><sp/>HAL_GPIO_WritePin(HD44780_D5_GPIO_Port,<sp/>HD44780_D5_Pin,<sp/>GET_GPIO_BIT(data,<sp/>5));</highlight></codeline>
<codeline lineno="146"><highlight class="normal"><sp/><sp/><sp/><sp/>HAL_GPIO_WritePin(HD44780_D6_GPIO_Port,<sp/>HD44780_D6_Pin,<sp/>GET_GPIO_BIT(data,<sp/>6));</highlight></codeline>
<codeline lineno="147"><highlight class="normal"><sp/><sp/><sp/><sp/>HAL_GPIO_WritePin(HD44780_D7_GPIO_Port,<sp/>HD44780_D7_Pin,<sp/>GET_GPIO_BIT(data,<sp/>7));</highlight></codeline>
<codeline lineno="148"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/></highlight><highlight class="comment">//<sp/>HD44780_4BIT_BUS_REQURED</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="149"><highlight class="normal"><sp/><sp/><sp/><sp/>usDelay(<ref refid="hd44780_8c_1a20cade9b2e9fccce4b1bb1dc59a91a0b" kindref="member">HD44780_DATA_LATCH</ref>);</highlight></codeline>
<codeline lineno="150"><highlight class="normal">}</highlight></codeline>
<codeline lineno="151"><highlight class="normal"></highlight></codeline>
<codeline lineno="152"><highlight class="normal"></highlight><highlight class="comment">//<sp/>The<sp/>RS<sp/>line<sp/>of<sp/>the<sp/>LCD<sp/>is<sp/>set<sp/>to<sp/>LOW<sp/>/<sp/>HIGH.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="153"><highlight class="normal"></highlight><highlight class="comment">//<sp/>state<sp/>(0<sp/>-<sp/>requred<sp/>CMD,<sp/>1<sp/>-<sp/>requred<sp/>DATA)</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="154"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="hd44780_8c_1aaa9f0cbe49cb343a54f40f98c09b0e3b" kindref="member">HD44780_setRS</ref>(uint8_t<sp/>state){</highlight></codeline>
<codeline lineno="155"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(state){</highlight></codeline>
<codeline lineno="156"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>HAL_GPIO_WritePin(HD44780_RS_GPIO_Port,<sp/>HD44780_RS_Pin,<sp/>GPIO_PIN_SET);</highlight></codeline>
<codeline lineno="157"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight><highlight class="keywordflow">else</highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="158"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>HAL_GPIO_WritePin(HD44780_RS_GPIO_Port,<sp/>HD44780_RS_Pin,<sp/>GPIO_PIN_RESET);</highlight></codeline>
<codeline lineno="159"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="160"><highlight class="normal">}</highlight></codeline>
<codeline lineno="161"><highlight class="normal"></highlight></codeline>
<codeline lineno="162"><highlight class="normal"></highlight><highlight class="comment">//<sp/>The<sp/>RW<sp/>line<sp/>of<sp/>the<sp/>LCD<sp/>is<sp/>set<sp/>to<sp/>LOW<sp/>/<sp/>HIGH.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="163"><highlight class="normal"></highlight><highlight class="comment">//<sp/>state<sp/>(0<sp/>-<sp/>write<sp/>mode,<sp/>1<sp/>-<sp/>read<sp/>mode).</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="164"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="hd44780_8c_1ad9451dc8757dab4730c66a3182284e16" kindref="member">HD44780_setRW</ref>(uint8_t<sp/>state){</highlight></codeline>
<codeline lineno="165"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(state){</highlight></codeline>
<codeline lineno="166"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>HAL_GPIO_WritePin(HD44780_RW_GPIO_Port,<sp/>HD44780_RW_Pin,<sp/>GPIO_PIN_SET);</highlight></codeline>
<codeline lineno="167"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight><highlight class="keywordflow">else</highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="168"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>HAL_GPIO_WritePin(HD44780_RW_GPIO_Port,<sp/>HD44780_RW_Pin,<sp/>GPIO_PIN_RESET);</highlight></codeline>
<codeline lineno="169"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="170"><highlight class="normal">}</highlight></codeline>
<codeline lineno="171"><highlight class="normal"></highlight></codeline>
<codeline lineno="172"><highlight class="normal"></highlight><highlight class="comment">//<sp/>The<sp/>EN<sp/>line<sp/>of<sp/>the<sp/>LCD<sp/>is<sp/>set<sp/>to<sp/>LOW<sp/>/<sp/>HIGH.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="173"><highlight class="normal"></highlight><highlight class="comment">//<sp/>state<sp/>(0<sp/>-<sp/>start<sp/>of<sp/>strobe,<sp/>1<sp/>-<sp/>end<sp/>of<sp/>strobe).</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="174"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="hd44780_8c_1af9b70fa23fe73f5b06cfe0c3b604adf6" kindref="member">HD44780_setEN</ref>(uint8_t<sp/>state){</highlight></codeline>
<codeline lineno="175"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(state){</highlight></codeline>
<codeline lineno="176"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>HAL_GPIO_WritePin(HD44780_EN_GPIO_Port,<sp/>HD44780_EN_Pin,<sp/>GPIO_PIN_SET);</highlight></codeline>
<codeline lineno="177"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>usDelay(<ref refid="hd44780_8c_1a248ef55873be7b7ce4d7edb8137b35f1" kindref="member">HD44780_STROBE_TIME</ref>);<sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Stobe<sp/>delay<sp/>must<sp/>be<sp/>&gt;<sp/>230<sp/>ns</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="178"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight><highlight class="keywordflow">else</highlight><highlight class="normal">{</highlight></codeline>
<codeline lineno="179"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>HAL_GPIO_WritePin(HD44780_EN_GPIO_Port,<sp/>HD44780_EN_Pin,<sp/>GPIO_PIN_RESET);</highlight></codeline>
<codeline lineno="180"><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>usDelay(100);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Delay<sp/>&gt;<sp/>270<sp/>ns.<sp/>Minimum<sp/>allowable<sp/>interval<sp/>between<sp/>signals<sp/>EN<sp/>=<sp/>1</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="181"><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="182"><highlight class="normal"></highlight></codeline>
<codeline lineno="183"><highlight class="normal">}</highlight></codeline>
<codeline lineno="184"><highlight class="normal"></highlight></codeline>
<codeline lineno="185"><highlight class="normal"></highlight><highlight class="comment">//</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="186"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>usDelay(uint16_t<sp/>us){</highlight></codeline>
<codeline lineno="187"><highlight class="normal"></highlight></codeline>
<codeline lineno="188"><highlight class="normal"><sp/><sp/><sp/><sp/>TIM1-&gt;CNT<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="189"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">while</highlight><highlight class="normal">(TIM1-&gt;CNT<sp/>&lt;<sp/>us){};<sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>ÐÐ¾ÑÐµÐ¼Ñ<sp/>ÑÐ°Ðº?</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="190"><highlight class="normal"></highlight></codeline>
<codeline lineno="191"><highlight class="normal">}</highlight></codeline>
<codeline lineno="192"><highlight class="normal"></highlight></codeline>
<codeline lineno="193"><highlight class="normal"></highlight><highlight class="comment">//<sp/>LCD<sp/>write<sp/>cycle</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="194"><highlight class="normal"></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/><ref refid="hd44780_8c_1a64ccdfe09ae2e69293cff8d88250ebc4" kindref="member">HD44780_writeByte</ref>(uint8_t<sp/>data,<sp/>uint8_t<sp/>state){</highlight></codeline>
<codeline lineno="195"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Preparing<sp/>the<sp/>LCD<sp/>for<sp/>data<sp/>recording.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="196"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hd44780_8c_1aaa9f0cbe49cb343a54f40f98c09b0e3b" kindref="member">HD44780_setRS</ref>(state);<sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Set<sp/>CMD<sp/>mode</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="197"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hd44780_8c_1ad9451dc8757dab4730c66a3182284e16" kindref="member">HD44780_setRW</ref>(0);<sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Write.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="198"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hd44780_8c_1af9b70fa23fe73f5b06cfe0c3b604adf6" kindref="member">HD44780_setEN</ref>(0);<sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Start<sp/>of<sp/>strobe.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="199"><highlight class="normal"></highlight></codeline>
<codeline lineno="200"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>HD44780_8BIT_BUS_REQURED</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="201"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Preparing<sp/>data<sp/>for<sp/>sending.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="202"><highlight class="normal"><sp/><sp/><sp/><sp/>HD44780_setDataBus(data);</highlight></codeline>
<codeline lineno="203"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>We<sp/>send<sp/>the<sp/>junior<sp/>data<sp/>tetrad<sp/>to<sp/>the<sp/>port.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="204"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hd44780_8c_1af9b70fa23fe73f5b06cfe0c3b604adf6" kindref="member">HD44780_setEN</ref>(1);<sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Start<sp/>of<sp/>strobe</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="205"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hd44780_8c_1af9b70fa23fe73f5b06cfe0c3b604adf6" kindref="member">HD44780_setEN</ref>(0);<sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Start<sp/>of<sp/>strobe.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="206"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/><sp/></highlight><highlight class="comment">//HD44780_8BIT_BUS_REQURED</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="207"><highlight class="normal"></highlight></codeline>
<codeline lineno="208"><highlight class="normal"></highlight><highlight class="preprocessor">#ifdef<sp/>HD44780_4BIT_BUS_REQURED</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="209"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Preparing<sp/>the<sp/>data<sp/>of<sp/>the<sp/>senior<sp/>notebook<sp/>for<sp/>sending.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="210"><highlight class="normal"><sp/><sp/><sp/><sp/>HD44780_setDataHigh(data);</highlight></codeline>
<codeline lineno="211"><highlight class="normal"></highlight></codeline>
<codeline lineno="212"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>First,<sp/>we<sp/>send<sp/>the<sp/>senior<sp/>data<sp/>tetrad<sp/>to<sp/>the<sp/>port.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="213"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hd44780_8c_1af9b70fa23fe73f5b06cfe0c3b604adf6" kindref="member">HD44780_setEN</ref>(1);<sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Start<sp/>of<sp/>strobe</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="214"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hd44780_8c_1af9b70fa23fe73f5b06cfe0c3b604adf6" kindref="member">HD44780_setEN</ref>(0);<sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Start<sp/>of<sp/>strobe</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="215"><highlight class="normal"></highlight></codeline>
<codeline lineno="216"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Preparing<sp/>the<sp/>data<sp/>of<sp/>the<sp/>junior<sp/>tetrad<sp/>for<sp/>sending.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="217"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hd44780_8c_1adf44985254edf6ac35b0e762c6500e6f" kindref="member">HD44780_setDataLow</ref>(data);</highlight></codeline>
<codeline lineno="218"><highlight class="normal"></highlight></codeline>
<codeline lineno="219"><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>We<sp/>send<sp/>the<sp/>junior<sp/>data<sp/>tetrad<sp/>to<sp/>the<sp/>port.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="220"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hd44780_8c_1af9b70fa23fe73f5b06cfe0c3b604adf6" kindref="member">HD44780_setEN</ref>(1);<sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Start<sp/>of<sp/>strobe</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="221"><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="hd44780_8c_1af9b70fa23fe73f5b06cfe0c3b604adf6" kindref="member">HD44780_setEN</ref>(0);<sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>Start<sp/>of<sp/>strobe.</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="222"><highlight class="normal"></highlight><highlight class="preprocessor">#endif<sp/><sp/></highlight><highlight class="comment">//HD44780_4BIT_BUS_REQURED</highlight><highlight class="normal"></highlight></codeline>
<codeline lineno="223"><highlight class="normal">}</highlight></codeline>
<codeline lineno="224"><highlight class="normal"></highlight><highlight class="comment">/*</highlight></codeline>
<codeline lineno="225"><highlight class="comment">//<sp/>Ð¦Ð¸ÐºÐ»<sp/>ÑÑÐµÐ½Ð¸Ñ<sp/>Ð¸Ð·<sp/>ÐÐÐ</highlight></codeline>
<codeline lineno="226"><highlight class="comment">uint8_t<sp/>HD44780_readByte(void){</highlight></codeline>
<codeline lineno="227"><highlight class="comment"><sp/><sp/><sp/><sp/>uint8_t<sp/>data<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="228"><highlight class="comment"></highlight></codeline>
<codeline lineno="229"><highlight class="comment"><sp/><sp/><sp/><sp/>//<sp/>ÐÑÐ¸Ð½Ð¸Ð¼Ð°ÐµÐ¼<sp/>Ð´Ð°Ð½Ð½ÑÐµ<sp/>Ð¸Ð·<sp/>Ð¿Ð¾ÑÑÐ°<sp/>(ÐÑÐµ<sp/>8<sp/>Ð±Ð¸Ñ)</highlight></codeline>
<codeline lineno="230"><highlight class="comment"><sp/><sp/><sp/><sp/>HD44780_STARTSTB();<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>ÐÐ°ÑÐ°Ð»Ð¾<sp/>ÑÑÑÐ¾Ð±Ð°</highlight></codeline>
<codeline lineno="231"><highlight class="comment"><sp/><sp/><sp/><sp/>usDelay(1);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>ÐÐµÐ¾Ð±ÑÐ¾Ð´Ð¸Ð¼Ð¾<sp/>Ð´Ð»Ñ<sp/>ÑÑÑÐ°Ð½Ð¾Ð²ÐºÐ¸<sp/>ÑÐ¾ÑÑÐ¾ÑÐ½Ð¸Ñ<sp/>Ð½Ð°<sp/>Ð»Ð¸Ð½Ð¸Ð¸<sp/>HD44780_wire_EN</highlight></codeline>
<codeline lineno="232"><highlight class="comment"><sp/><sp/><sp/><sp/>//data<sp/>=<sp/>HD44780_PINDATA;<sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>ÑÐ¸ÑÐ°ÐµÐ¼<sp/>Ð´Ð°Ð½Ð½ÑÐµ<sp/>(AVR)</highlight></codeline>
<codeline lineno="233"><highlight class="comment"><sp/><sp/><sp/><sp/>//data<sp/>=<sp/>HD44780_DATA_PxIN;<sp/><sp/><sp/><sp/><sp/>//<sp/>Ð§Ð¸ÑÐ°ÐµÐ¼<sp/>Ð´Ð°Ð½Ð½ÑÐµ</highlight></codeline>
<codeline lineno="234"><highlight class="comment"><sp/><sp/><sp/><sp/>//data<sp/>|=</highlight></codeline>
<codeline lineno="235"><highlight class="comment"><sp/><sp/><sp/><sp/>HD44780_ENDSTB();<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>ÐÐ¾Ð½ÐµÑ<sp/>ÑÑÑÐ¾Ð±Ð°</highlight></codeline>
<codeline lineno="236"><highlight class="comment"></highlight></codeline>
<codeline lineno="237"><highlight class="comment">#ifdef<sp/>HD44780_4BIT_BUS_REQURED</highlight></codeline>
<codeline lineno="238"><highlight class="comment"></highlight></codeline>
<codeline lineno="239"><highlight class="comment"><sp/><sp/><sp/><sp/>//<sp/>ÐÐ°Ð¿Ð¾Ð¼Ð¸Ð½Ð°ÐµÐ¼<sp/>ÑÑÐ°ÑÑÑÑ<sp/>ÑÐµÑÑÐ°Ð´Ñ</highlight></codeline>
<codeline lineno="240"><highlight class="comment"><sp/><sp/><sp/><sp/>uint8_t<sp/>temp<sp/>=<sp/>((data<sp/>&amp;<sp/>0x0F)&lt;&lt;4);</highlight></codeline>
<codeline lineno="241"><highlight class="comment"></highlight></codeline>
<codeline lineno="242"><highlight class="comment"><sp/><sp/><sp/><sp/>//<sp/>ÐÑÐ¸Ð½Ð¸Ð¼Ð°ÐµÐ¼<sp/>Ð´Ð°Ð½Ð½ÑÐµ<sp/>Ð¸Ð·<sp/>Ð¿Ð¾ÑÑÐ°<sp/>(ÐÑÐµ<sp/>8<sp/>Ð±Ð¸Ñ)</highlight></codeline>
<codeline lineno="243"><highlight class="comment"><sp/><sp/><sp/><sp/>HD44780_STARTSTB();<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>ÐÐ°ÑÐ°Ð»Ð¾<sp/>ÑÑÑÐ¾Ð±Ð°</highlight></codeline>
<codeline lineno="244"><highlight class="comment"><sp/><sp/><sp/><sp/>__asm__(&quot;NOP&quot;);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>ÐÐµÐ¾Ð±ÑÐ¾Ð´Ð¸Ð¼Ð¾<sp/>Ð´Ð»Ñ<sp/>ÑÑÑÐ°Ð½Ð¾Ð²ÐºÐ¸<sp/>ÑÐ¾ÑÑÐ¾ÑÐ½Ð¸Ñ<sp/>Ð½Ð°<sp/>Ð»Ð¸Ð½Ð¸Ð¸<sp/>HD44780_wire_EN</highlight></codeline>
<codeline lineno="245"><highlight class="comment"><sp/><sp/><sp/><sp/>//data<sp/>=<sp/>HD44780_PINDATA;<sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>ÑÐ¸ÑÐ°ÐµÐ¼<sp/>Ð¼Ð»Ð°Ð´ÑÑÑ<sp/>ÑÐµÑÑÐ°Ð´Ñ<sp/><sp/><sp/>(AVR)</highlight></codeline>
<codeline lineno="246"><highlight class="comment"><sp/><sp/><sp/><sp/>//data<sp/>=<sp/>HD44780_DATA_PxIN;<sp/><sp/><sp/><sp/><sp/>//<sp/>Ð§Ð¸ÑÐ°ÐµÐ¼<sp/>Ð´Ð°Ð½Ð½ÑÐµ</highlight></codeline>
<codeline lineno="247"><highlight class="comment"><sp/><sp/><sp/><sp/>HD44780_ENDSTB();<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>ÐÐ¾Ð½ÐµÑ<sp/>ÑÑÑÐ¾Ð±Ð°</highlight></codeline>
<codeline lineno="248"><highlight class="comment"></highlight></codeline>
<codeline lineno="249"><highlight class="comment"><sp/><sp/><sp/><sp/>//<sp/>ÐÑÑÐ°Ð²Ð»ÑÐµÐ¼<sp/>Ð²<sp/>data<sp/>ÑÐ¾Ð»ÑÐºÐ¾<sp/>Ð¼Ð»Ð°Ð´ÑÑÑ<sp/>ÑÐµÑÑÐ°Ð´Ñ</highlight></codeline>
<codeline lineno="250"><highlight class="comment"><sp/><sp/><sp/><sp/>//SWAP(data);<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Ð¼Ð»Ð°Ð´ÑÑÑ<sp/>ÑÐµÑÑÐ°Ð´Ñ<sp/>Ð½Ð°<sp/>ÑÐ²Ð¾Ðµ<sp/>Ð¼ÐµÑÑÐ¾<sp/>(AVR)</highlight></codeline>
<codeline lineno="251"><highlight class="comment"><sp/><sp/><sp/><sp/>data<sp/>&amp;=<sp/>0x0F;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>ÐÑÐ¸ÑÐ°ÐµÐ¼<sp/>ÑÑÐ°ÑÑÑÑ<sp/>ÑÐµÑÑÐ°Ð´Ñ<sp/>Ð²<sp/>data</highlight></codeline>
<codeline lineno="252"><highlight class="comment"><sp/><sp/><sp/><sp/>//temp<sp/>&amp;=<sp/>0xf0;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>ÐÑÐ¸ÑÐ°ÐµÐ¼<sp/>Ð¼Ð»Ð°Ð´ÑÑÑ<sp/>ÑÐµÑÑÐ°Ð´Ñ<sp/>Ð²<sp/>temp<sp/>(AVR)</highlight></codeline>
<codeline lineno="253"><highlight class="comment"><sp/><sp/><sp/><sp/>data<sp/>|=<sp/>temp;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>Ð¡Ð¾Ð²Ð¼ÐµÑÐ°ÐµÐ¼<sp/>ÑÐµÑÑÐ°Ð´Ñ</highlight></codeline>
<codeline lineno="254"><highlight class="comment"></highlight></codeline>
<codeline lineno="255"><highlight class="comment">#else</highlight></codeline>
<codeline lineno="256"><highlight class="comment"><sp/><sp/><sp/><sp/>//<sp/>TO<sp/>DO...</highlight></codeline>
<codeline lineno="257"><highlight class="comment">#endif//HD44780_4BIT_BUS_REQURED</highlight></codeline>
<codeline lineno="258"><highlight class="comment"></highlight></codeline>
<codeline lineno="259"><highlight class="comment"><sp/><sp/><sp/><sp/>return<sp/>data;</highlight></codeline>
<codeline lineno="260"><highlight class="comment">}</highlight></codeline>
<codeline lineno="261"><highlight class="comment"></highlight></codeline>
<codeline lineno="262"><highlight class="comment">//<sp/>Ð¦Ð¸ÐºÐ»<sp/>Ð¾Ð¶Ð¸Ð´Ð°Ð½Ð¸Ñ<sp/>Ð³Ð¾ÑÐ¾Ð²Ð½Ð¾ÑÑÐ¸</highlight></codeline>
<codeline lineno="263"><highlight class="comment">uint8_t<sp/>HD44780_wait(void){</highlight></codeline>
<codeline lineno="264"><highlight class="comment"><sp/><sp/><sp/><sp/>//<sp/>Ð ÐµÐ·ÑÐ»ÑÑÐ°Ñ<sp/>ÑÐ°Ð±Ð¾ÑÑ<sp/>ÑÑÐ½ÐºÑÐ¸Ð¸</highlight></codeline>
<codeline lineno="265"><highlight class="comment"><sp/><sp/><sp/><sp/>uint8_t<sp/>result<sp/>=<sp/>0;</highlight></codeline>
<codeline lineno="266"><highlight class="comment"></highlight></codeline>
<codeline lineno="267"><highlight class="comment"><sp/><sp/><sp/><sp/>//<sp/>Ð§ÑÐµÐ½Ð¸Ðµ<sp/>ÐºÐ¾Ð¼Ð°Ð½Ð´Ñ</highlight></codeline>
<codeline lineno="268"><highlight class="comment"><sp/><sp/><sp/><sp/>HD44780_RQCMD();</highlight></codeline>
<codeline lineno="269"><highlight class="comment"><sp/><sp/><sp/><sp/>HD44780_RQRD();</highlight></codeline>
<codeline lineno="270"><highlight class="comment"></highlight></codeline>
<codeline lineno="271"><highlight class="comment"><sp/><sp/><sp/><sp/>//<sp/>ÐÐ½Ð¸ÑÐ¸Ð°Ð»Ð¸Ð·Ð¸ÑÑÐµÐ¼<sp/>Ð¿ÐµÑÐµÐ¼ÐµÐ½Ð½ÑÑ<sp/>Ð´Ð»Ñ<sp/>ÐºÐ¾Ð½ÑÑÐ¾Ð»Ñ<sp/>ÑÐ°Ð¹Ð¼Ð°ÑÑÐ°</highlight></codeline>
<codeline lineno="272"><highlight class="comment"><sp/><sp/><sp/><sp/>#ifdef<sp/>HD44780_TIMEOUT_CONTROL_ENABLE</highlight></codeline>
<codeline lineno="273"><highlight class="comment"><sp/><sp/><sp/><sp/>uint32_t<sp/>timeout<sp/>=<sp/>HD44780_BUSY_TIMEOUT;</highlight></codeline>
<codeline lineno="274"><highlight class="comment"><sp/><sp/><sp/><sp/>#else</highlight></codeline>
<codeline lineno="275"><highlight class="comment"><sp/><sp/><sp/><sp/>uint32_t<sp/>timeout<sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="276"><highlight class="comment"><sp/><sp/><sp/><sp/>#endif<sp/>//HD44780_TIMEOUT_CONTROL_ENABLE</highlight></codeline>
<codeline lineno="277"><highlight class="comment"></highlight></codeline>
<codeline lineno="278"><highlight class="comment"><sp/><sp/><sp/><sp/>//<sp/>ÐÐ´ÐµÐ¼,<sp/>Ð¿Ð¾ÐºÐ°<sp/>Ð½Ðµ<sp/>Ð²ÑÑÐµÐ»<sp/>ÑÐ°Ð¹Ð¼Ð°ÑÑ</highlight></codeline>
<codeline lineno="279"><highlight class="comment"><sp/><sp/><sp/><sp/>while(timeout--<sp/>&gt;<sp/>0<sp/>){</highlight></codeline>
<codeline lineno="280"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>//<sp/>ÐÑÐ»Ð¸<sp/>ÑÐ»Ð°Ð³<sp/>BF<sp/>ÑÑÑÐ°Ð½Ð¾Ð²Ð»ÐµÐ½,<sp/>ÑÐ¾<sp/>Ð¶Ð´ÐµÐ¼</highlight></codeline>
<codeline lineno="281"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>if(HD44780_BUSY_FLAG<sp/>&amp;<sp/>HD44780_readByte()){</highlight></codeline>
<codeline lineno="282"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>usDelay(HD44780_BUSY_TIMEOUT_STEP_us);</highlight></codeline>
<codeline lineno="283"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}else{</highlight></codeline>
<codeline lineno="284"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>result<sp/>=<sp/>1;</highlight></codeline>
<codeline lineno="285"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>break;</highlight></codeline>
<codeline lineno="286"><highlight class="comment"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="287"><highlight class="comment"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline lineno="288"><highlight class="comment"></highlight></codeline>
<codeline lineno="289"><highlight class="comment"><sp/><sp/><sp/><sp/>return(result);</highlight></codeline>
<codeline lineno="290"><highlight class="comment">}</highlight></codeline>
<codeline lineno="291"><highlight class="comment">*/</highlight><highlight class="normal"></highlight></codeline>
    </programlisting>
    <location file="Src/hd44780.c"/>
  </compounddef>
</doxygen>
